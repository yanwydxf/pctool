(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-questionManage-questionManage"],{"0b48":function(e,t,a){var n=a("8a9c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("045b398b",n,!0,{sourceMap:!1,shadowMode:!1})},"4b2d":function(e,t,a){"use strict";var n=a("0b48"),i=a.n(n);i.a},"5fa8":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}));var n={uniDataSelect:a("ac9f").default,uniEasyinput:a("6902").default,uniTable:a("d108").default,uniTr:a("b78e").default,uniTh:a("4b7a").default,uniTd:a("9ec9").default,uniPagination:a("af96").default,uniPopup:a("5541").default,uniDataCheckbox:a("0c55").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"question-box"},[a("div",{staticClass:"search-container"},[a("div",{staticClass:"search-item"},[a("div",{staticClass:"label"},[e._v("选择题库")]),a("uni-data-select",{attrs:{clear:!1,localdata:[{value:1,text:"云课题库"},{value:2,text:"本地题库"}]},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bankChange.apply(void 0,arguments)}},model:{value:e.userSelFormData.questionBank,callback:function(t){e.$set(e.userSelFormData,"questionBank",t)},expression:"userSelFormData.questionBank"}})],1),a("div",{staticClass:"search-item"},[a("div",{staticClass:"label"},[e._v("选择分类")]),a("uni-data-select",{attrs:{clear:!0,localdata:e.classList},model:{value:e.userSelFormData.tagId,callback:function(t){e.$set(e.userSelFormData,"tagId",t)},expression:"userSelFormData.tagId"}})],1),a("div",{staticClass:"search-item"},[a("div",{staticClass:"label"},[e._v("选择难度")]),a("uni-data-select",{attrs:{clear:!0,localdata:[{value:1,text:"简答"},{value:2,text:"中等"},{value:3,text:"困难"}]},model:{value:e.userSelFormData.difficulty,callback:function(t){e.$set(e.userSelFormData,"difficulty",t)},expression:"userSelFormData.difficulty"}})],1),a("div",{staticClass:"search-item"},[a("div",{staticClass:"label"},[e._v("输入题干")]),a("uni-easyinput",{attrs:{placeholder:"请输入题干"},model:{value:e.userSelFormData.questionStem,callback:function(t){e.$set(e.userSelFormData,"questionStem",t)},expression:"userSelFormData.questionStem"}})],1),a("v-uni-button",{staticClass:"uni-button",staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSearch("driving")}}},[e._v("搜索")]),a("v-uni-button",{staticClass:"uni-button",staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toShowDialog("","add")}}},[e._v("新增题目")])],1),a("div",{staticClass:"tale-container"},[a("uni-table",{staticClass:"store-question-list",attrs:{border:!0,stripe:!0,emptyText:"暂无数据",loading:e.loading},on:{"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}},[a("uni-tr",[a("uni-th",{attrs:{align:"center"}},[e._v("序号")]),a("uni-th",{attrs:{align:"center",width:"120px"}},[e._v("名称")]),a("uni-th",{attrs:{align:"center"}},[e._v("类型")]),a("uni-th",{attrs:{align:"center"}},[e._v("难度")]),a("uni-th",{attrs:{align:"center"}},[e._v("更新时间")]),a("uni-th",{attrs:{align:"center"}},[e._v("操作")])],1),e._l(e.questionsList,(function(t,n){return a("uni-tr",{key:n},[a("uni-td",{attrs:{align:"center"}},[e._v(e._s((e.pagination.page-1)*e.pagination.pageSize+n+1))]),a("uni-td",{attrs:{align:"left",width:"400"}},[e._v(e._s(t.stem_shortcut))]),a("uni-td",{attrs:{align:"center"}},[e._v(e._s(e.filterQuestionType(t.question_type)))]),a("uni-td",{attrs:{align:"center"}},[e._v(e._s(e.filterDifficulty(t.difficulty)))]),a("uni-td",{attrs:{align:"center"}},[e._v(e._s(t.updated_at||t.create_time))]),a("uni-td",{attrs:{align:"center"}},[a("v-uni-view",{staticClass:"uni-group"},[a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.lookDetail(t)}}},[e._v("详情")]),2==e.userSelFormData.questionBank?a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"default"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.toShowDialog(t,"modify")}}},[e._v("编辑")]):e._e(),2==e.userSelFormData.questionBank?a("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.toShowDialog(t,"del")}}},[e._v("删除")]):e._e()],1)],1)],1)}))],2),a("v-uni-view",{staticClass:"uni-pagination-box"},[a("uni-pagination",{attrs:{"show-iconn":!0,"show-page-size":!0,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onPageChanged.apply(void 0,arguments)},pageSizeChange:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSize.apply(void 0,arguments)}},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1),a("uni-popup",{ref:"popup",staticClass:"my-popup",attrs:{"background-color":"#fff"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.popupChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"popup-content"},[a("v-uni-view",{staticClass:"title"},[a("mavon-editor",{attrs:{subfield:!1,toolbarsFlag:!1,defaultOpen:"preview"},model:{value:e.questionObj.title,callback:function(t){e.$set(e.questionObj,"title",t)},expression:"questionObj.title"}})],1),e.choices.length?a("v-uni-view",{staticClass:"choice"},[a("uni-data-checkbox",{attrs:{multiple:2==e.question_type,localdata:e.choices},model:{value:e.userSel,callback:function(t){e.userSel=t},expression:"userSel"}})],1):e._e(),a("v-uni-view",{staticClass:"correct-answer"},[a("mavon-editor",{attrs:{subfield:!1,toolbarsFlag:!1,defaultOpen:"preview"},model:{value:e.questionObj.answer,callback:function(t){e.$set(e.questionObj,"answer",t)},expression:"questionObj.answer"}})],1),a("v-uni-view",{staticClass:"answer-parse"},[a("mavon-editor",{attrs:{subfield:!1,toolbarsFlag:!1,defaultOpen:"preview"},model:{value:e.questionObj.parse,callback:function(t){e.$set(e.questionObj,"parse",t)},expression:"questionObj.parse"}})],1)],1)],1),a("Dialog",{attrs:{width:800,title:"温馨提示"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.delConfirm.apply(void 0,arguments)}},scopedSlots:e._u([{key:"default",fn:function(){return[e._v("是否确认删除题目")]},proxy:!0}]),model:{value:e.showDel,callback:function(t){e.showDel=t},expression:"showDel"}}),a("Dialog",{attrs:{width:2e3,title:"编辑题目"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyConfirm.apply(void 0,arguments)}},scopedSlots:e._u([{key:"default",fn:function(){return[a("AddQuestion",{ref:"addQuestionRef",on:{ready:function(t){arguments[0]=t=e.$handleEvent(t),e.ready.apply(void 0,arguments)}}})]},proxy:!0}]),model:{value:e.showModify,callback:function(t){e.showModify=t},expression:"showModify"}})],1)])},s=[]},"8a9c":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.question-box[data-v-1113db86]{display:flex;flex-direction:column;height:100%;overflow:hidden}.question-box .tale-container[data-v-1113db86]{flex:1}.my-popup[data-v-1113db86] uni-view[name="content"]{overflow:auto}.popup-content[data-v-1113db86]{height:100%;width:500px;padding:%?40?%;box-sizing:border-box;overflow-y:auto}.popup-content[data-v-1113db86] > uni-view{padding-bottom:%?30?%}.popup-content[data-v-1113db86] .v-note-wrapper{min-width:auto;min-height:auto;box-shadow:none!important}.popup-content[data-v-1113db86] .v-note-wrapper .v-note-panel .v-note-show .v-show-content{padding-left:0}.search-container[data-v-1113db86]{display:flex;flex-wrap:wrap;padding:0 15px 0;align-items:center}.search-container[data-v-1113db86] .search-item{display:flex;align-items:center}.search-container[data-v-1113db86] .search-item .uni-select__input-text{width:140px}.search-container[data-v-1113db86] .search-item .label{width:80px}',""]),e.exports=t},"970d":function(e,t,a){"use strict";(function(e){var n=a("4ea4");a("99af"),a("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530")),s=n(a("ade3"));a("96cf");var o=n(a("1da1")),r=n(a("9ec5")),u=n(a("742c")),l=n(a("873e")),c={name:"",components:{Dialog:u.default,AddQuestion:l.default},data:function(){return{showDel:!1,showModify:!1,status:"",currQuetion:null,userSel:"",choices:[],question_type:"",userSelFormData:{tagId:"",questionBank:1,questionType:"",difficulty:"",questionStem:""},pagination:{pageSize:10,page:1,total:0},questionsList:[],classList:[],loading:!1,selectedIndexs:[],questionObj:{title:"",answer:"",parse:""}}},mounted:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTypeList();case 2:e.getTableData((a={},(0,s.default)(a,1==e.userSelFormData.questionBank?"tag_ids":"question_tag",e.userSelFormData.tagId),(0,s.default)(a,"difficulty",e.userSelFormData.difficulty),(0,s.default)(a,"keyword",e.userSelFormData.questionStem),(0,s.default)(a,"page_size",e.pagination.pageSize),(0,s.default)(a,"page",e.pagination.page),a));case 3:case"end":return t.stop()}}),t)})))()},methods:{toShowDialog:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.status=t,a.currQuetion=e,"add"===a.status||"modify"===a.status?a.showModify=!0:"del"===a.status&&(a.showDel=!0);case 3:case"end":return n.stop()}}),n)})))()},ready:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,i,s,o,r,u,l,c,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("modify"===e.status){t.next=2;break}return t.abrupt("return");case 2:return a=e.$refs.addQuestionRef,a.status="modify",a.questionId=e.currQuetion._id,t.next=7,e.$request("getQuestionDetail",{id:e.currQuetion._id},{objectName:"uni-class-manage"});case 7:n=t.sent,n.data&&(i=n.data[0]||{},s=i.question_stem,o=i.question_tag,r=i.question_type,u=i.question_category,l=i.answer_parse,c=i.choices,d=i.correct_answer,f=i.difficulty,a.formData.questionName=s,a.formData.questionCategory=o,a.formData.questionKnowledge=u,a.formData.questionType=r,a.formData.difficulty=f,a.formData.choices=(c||[]).map((function(e){var t=e.choice,a=e.content;return t&&a?"".concat(t,":").concat(a):t})).join("\n"),a.formData.correctAnswer=d,a.formData.answerParse=l);case 9:case"end":return t.stop()}}),t)})))()},delConfirm:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request("toDetailQuestions",{status:"del",id:e.currQuetion._id},{objectName:"uni-class-manage"});case 2:a=t.sent,"00"===a.code&&(e.showDel=!1,e.toSearch(),uni.showToast({title:a.msg}));case 4:case"end":return t.stop()}}),t)})))()},modifyConfirm:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.addQuestionRef.confirm();case 2:a=t.sent,a&&(e.showModify=!1,e.toSearch(),uni.showToast({title:a.msg}));case 4:case"end":return t.stop()}}),t)})))()},onPageChanged:function(){this.toSearch()},changeSize:function(e){this.pagination.pageSize=e},getQuestionDetail:function(e){return(0,o.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.default)({url:"/evaluation/single_choices/".concat(e,"/")});case 2:return a=t.sent,t.abrupt("return",a.data.data);case 4:case"end":return t.stop()}}),t)})))()},lookDetail:function(e){var t=this,a=e.id,n=e._id,i=e.question_type;this.question_type=i,this.$refs.popup.open("right"),this.$nextTick((0,o.default)(regeneratorRuntime.mark((function e(){var i,s,o,r,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=null,1!=t.userSelFormData.questionBank){e.next=7;break}return e.next=4,t.getQuestionDetail(a);case 4:i=e.sent,e.next=11;break;case 7:return e.next=9,t.$request("getQuestionDetail",{id:n},{objectName:"uni-class-manage"});case 9:i=e.sent,i=(i.data||[])[0]||{};case 11:s=i,o=s.question_stem,r=s.choices,u=s.correct_answer,l=s.answer_parse,t.choices=(r||[]).map((function(e){return{text:"".concat(e.choice," ").concat(e.content),value:e.choice,disable:!0}}))||[],t.questionObj.title="### 标题："+o,t.questionObj.answer="答案："+u,t.questionObj.parse="答案解析："+l;case 16:case"end":return e.stop()}}),e)}))))},popupChange:function(t){e.log(t)},toSearch:function(e){var t;"driving"===e&&(this.pagination.page=1),this.getTableData((t={},(0,s.default)(t,1==this.userSelFormData.questionBank?"tag_ids":"question_tag",this.userSelFormData.tagId),(0,s.default)(t,"difficulty",this.userSelFormData.difficulty),(0,s.default)(t,"keyword",this.userSelFormData.questionStem),(0,s.default)(t,"page_size",this.pagination.pageSize),(0,s.default)(t,"page",this.pagination.page),t))},filterDifficulty:function(e){return 1==e?"简单":2==e?"中等":"困难"},filterQuestionType:function(e){return 1==e?"单项选择题":2==e?"多项选择题":3==e?"判断题":4==e?"填空题":5==e?"问答题":6==e?"OJ 编程题":7==e?"挑战题":8==e?"单片机实操题":void 0},bankChange:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pagination.page=1,t.userSelFormData.questionBank=e,a.next=4,t.getTypeList();case 4:t.getTableData((n={},(0,s.default)(n,1==t.userSelFormData.questionBank?"tag_ids":"question_tag",t.userSelFormData.tagId),(0,s.default)(n,"difficulty",t.userSelFormData.difficulty),(0,s.default)(n,"keyword",t.userSelFormData.questionStem),(0,s.default)(n,"page_size",t.pagination.pageSize),(0,s.default)(n,"page",t.pagination.page),n));case 5:case"end":return a.stop()}}),a)})))()},getTypeList:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=null,1!=e.userSelFormData.questionBank){t.next=7;break}return t.next=4,(0,r.default)({url:"/evaluation/tags/",type:"get"});case 4:a=t.sent,t.next=11;break;case 7:if(2!=e.userSelFormData.questionBank){t.next=11;break}return t.next=10,e.$request("getTags","",{objectName:"uni-class-manage"});case 10:a=t.sent;case 11:a&&(1==e.userSelFormData.questionBank?e.classList=((null===(n=a)||void 0===n||null===(i=n.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.rows)||[]).map((function(e){return{value:e.id,text:e.name}})):e.classList=((null===(o=a)||void 0===o?void 0:o.data)||[]).map((function(e){return{value:e.categoryId,text:e.categoryName}})));case 12:case"end":return t.stop()}}),t)})))()},getTableData:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var n,s,o,u,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,n=null,1!=t.userSelFormData.questionBank){a.next=12;break}return e.bank_id=7,a.next=6,(0,r.default)({url:"/evaluation/questions/",type:"get",data:(0,i.default)({},e)});case 6:n=a.sent,t.loading=!1,t.pagination.total=(null===(s=n)||void 0===s||null===(o=s.data)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.count)||0,t.questionsList=null===(l=n)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.data.rows,a.next=16;break;case 12:return a.next=14,t.$request("getQuestionPageList",(0,i.default)({},e),{objectName:"uni-class-manage"});case 14:n=a.sent,"00"===n.code&&(t.loading=!1,t.questionsList=n.data,t.pagination.total=n.total);case 16:case"end":return a.stop()}}),a)})))()}}};t.default=c}).call(this,a("5a52")["default"])},d11d:function(e,t,a){"use strict";a.r(t);var n=a("970d"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},dbe3:function(e,t,a){"use strict";a.r(t);var n=a("5fa8"),i=a("d11d");for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);a("4b2d");var o,r=a("f0c5"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"1113db86",null,!1,n["a"],o);t["default"]=u.exports}}]);